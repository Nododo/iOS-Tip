## 2017.1.4 项目计划 + 项目梳理

### 项目计划

1. 代码规范
	
	```
	- 文件命名规范
	- 变量命名规范
	- 函数命名规范
	- 注释规范
	- 代码块规范
	- 无用/测试代码规范
	```
2. 代码质量
	
	```
	每次迭代的Review来控制，主要内容有：
	- 基础知识与技术
	- 性能控制，包括重要控件的性能优化与数据处理优化
	- Instrumemts做相关检测，主要是leak 和 fps
	```
3. 代码重构
	
	```
	基于目前项目的迭代速度的原因，重构将会是分布进行，主要分为：
	- 网络库
	- 基础工具类
	- 第三库和自有库包装
	- 整体架构变迁
	```
4. 第三方库引用规范

	```
	重度使用pod进行管理，对于第三方库，根据使用场景和对包大小的影响，都可以直接运用我们现在的git工作流的方式进行fork和同步，这些包装过的第三方库和自有库都会统一放到公司级的github账号下
	```
5. APP瘦身
	
	```
	通过代码精简和第三方库方案的优化选择，迭代造成的废弃资源和废弃代码处理，未来可以考虑bitcode 来进行app 的瘦身，在未来半年的时间内，尽量控制在010MB以内
	```
6. Git工作流
	
	```
	严格按照主仓库的readme去执行，接下来会操作角色权限来协助完成这一点
	```
7. Review与技术分享

	```
	- 每次迭代后发版前都需要进行review来保证app的质量
	- 每2周需要做一次技术分享，我会做一个主题库，会涉及到iOS开发中绝大部分的主题和方向，大家轮着来，除特殊情况外不能延期，这也意在促进大家进步
	```
8. 本地存储
	
	```
	如非必要，尽量不要引入本地数据库存储，就算需要使用存储，可以优先考虑直接使用文件存储代替，必须用到数据库存储的情况下，根据app的属性和数据量的问题，对于技术选型coredata或者sqlite做好预期
	```
9. 埋点与Crash收集

	```
	目前埋点与crash收集都是通过第三方服务阿里百川来做的，看起来至少在crash收集方面不能满足我们的需要，我们需要考虑是自研或者其他第三方更专业的服务
	```

### 项目梳理

杜维欣：主要负责埋点和广告数据拉取和复用的逻辑

1. 埋点规范

	```
	目前都是运营告诉维欣要埋什么点，然后由维欣个人写埋点的标识符，有时由于个人习惯或者给运营使用时，或者在做数据分析时，各方的理解有误差造成不必要的麻烦，最好是由运营和客户端的同学一起制定下命名的规范来约束双方，也方便接下来的数据分析
	```

麻等等：主要负责News，Wallet模块和部分Invitation模块的分享部分

1. 页面刷新逻辑策略混乱
2. 兑吧积分bug
3. 提现UI反复bug
4. HUD风格不一致
5. apple原生分享结果不可控
6. 短链接由服务端返回所有的短链接，然后在客户端随机选取一个
7. 短链接被短链接服务商封掉
8. HTTPS问题
9. 客户端本地时间不可信

黄绍冬：主要负责Profile模块和Invitation模块的UI部分

1. 微信app id有2个
2. push流程不规范

	```
	目前是由运营告诉客户端开发，说想要推送哪条消息，然后由开发者手动把这条消息的id和url等信息找出来发给运营，然后运营人员在推送后台里面设置推送的链接进行推送
	```

### APP的架构

为应对未来可能出现的多个广告承载体（多个 XXX赚 APP）和新闻赚APP开发稳定性和质量问题，我们需要设计好一个基本的客户端架构。

基本架构分为3个部分：

1. Pod管理下的基础设施
	
	```
	- 基础第三方开源库（裁剪，定制需求二次开发等等）
	- 基础工具类（包括埋点，各种分类）
	- 使用的第三方服务打包（广点通，百度广告，阿里百川，微信，阿里OpenSDK等等）
	```
2. 对Pod管理层的包装中间件
	
	```
	根据开发需要，对基础设施需要做一个包装，以方便开发
	```
3. APP自身的业务层
	
	```
	APP自身的业务层基本上以MVC为主，在C中如果逻辑过多与model耦合严重，可以使用MVVM的结构去做相关解耦工作
	```